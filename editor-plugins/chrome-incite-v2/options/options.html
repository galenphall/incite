<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="options.css">
  <title>InCite Settings</title>
</head>
<body>
  <div class="container">
    <h1>
      <img src="../icons/logofulllight.svg" alt="InCite" class="logo-wordmark logo-light">
      <img src="../icons/logofulldark.svg" alt="InCite" class="logo-wordmark logo-dark">
      Settings
    </h1>

    <section>
      <h2>Connection</h2>
      <div class="field">
        <label>API Mode</label>
        <div class="radio-group">
          <label class="radio"><input type="radio" name="apiMode" value="cloud"> Cloud (inciteref.com)</label>
          <label class="radio"><input type="radio" name="apiMode" value="local"> Local (incite serve)</label>
        </div>
      </div>

      <div class="field" id="cloud-fields">
        <label for="cloudUrl">Cloud URL</label>
        <input type="url" id="cloudUrl" placeholder="https://inciteref.com">
        <label for="apiToken">API Token</label>
        <input type="password" id="apiToken" placeholder="mc_...">
        <a href="https://inciteref.com/web/account" target="_blank" class="help-link">Get a token from your account page</a>
      </div>

      <div class="field hidden" id="local-fields">
        <label for="localUrl">Local URL</label>
        <input type="url" id="localUrl" placeholder="http://localhost:8230">
      </div>

      <button id="btn-test" class="btn-secondary">Test Connection</button>
      <span id="test-result" class="test-result"></span>
    </section>

    <section>
      <h2>Recommendations</h2>
      <div class="field">
        <label for="k">Number of results</label>
        <input type="number" id="k" min="1" max="50" step="1">
      </div>
      <div class="field">
        <label for="contextSentences">Context window (sentences)</label>
        <input type="number" id="contextSentences" min="2" max="20" step="1">
      </div>
    </section>

    <section>
      <h2>Citation Format</h2>
      <div class="field">
        <label for="googleDocsCitationFormat">Google Docs format</label>
        <input type="text" id="googleDocsCitationFormat" placeholder="[@{bibtex_key}]">
        <span class="help">Placeholders: {bibtex_key}, {first_author}, {year}, {title}</span>
      </div>
      <div class="field">
        <label for="overleafCitationFormat">Overleaf format</label>
        <input type="text" id="overleafCitationFormat" placeholder="\cite{{bibtex_key}}">
      </div>
    </section>

    <section>
      <h2>Display</h2>
      <div class="field">
        <label class="checkbox">
          <input type="checkbox" id="showParagraphs"> Show evidence paragraphs
        </label>
      </div>
      <div class="field">
        <label class="checkbox">
          <input type="checkbox" id="showAbstracts"> Show abstracts
        </label>
      </div>
    </section>

    <div class="actions">
      <button id="btn-save" class="btn-primary">Save Settings</button>
      <span id="save-status"></span>
    </div>
  </div>

  <script src="../dist/options.js"></script>
</body>
</html>
